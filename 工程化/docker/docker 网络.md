​	



# 1.Docker容器网络介绍

​	Docker容器网络很好利用了Linux虚拟网络技术，在本地主机和容器内分别创建了虚拟接口，并让他们彼此联通(这一对接口叫做**veth pair**)，如下：

![network](//ws1.sinaimg.cn/mw690/b8a27c2fgy1g3ihgo77fcj20ie0e977k.jpg)

如上所示：在创建一个容器时，

- 会创建一对虚拟接口分别放到本地和新容器的命令空间中
- 本地主机一端的虚拟接口接到默认的docker0网桥上，并具有一veth开头的唯一名字，如veth123
- 容器的一端的虚拟接口将放到新的容器中，并修改名字为eth0，这个只在容器中可见
- 从网桥的可用地址段中获取一个空闲的地址分配至容器的eth0（例如172.12.0.1/16）,并配置默认路由网关为docker0网卡的内部接口docker0的ip地址。

然后容器就可以使用自己能看到的eth0虚拟网卡连接其他容器和访问外部网络。



# 2.Docker 指定网络配置

可以再docker运行的时候通过--net参数指定容器的网络配置，可选有bridge、host、container、none

- --net=bridge  : 默认值，在Docker网桥上为容器创建新的网格栈
- --net= host   :告诉Docker不要讲容器网络放到隔离的命令空间中，即不要容器化容器内的网络。辞职使用本地主机的网络，拥有本地主机接口的访问权限。。这个对于本地主机较为危险。需要小心
- --net=container  :让Docker将新建容器的进程放到一个已存在容器的网络栈中，新容器进程有自己的文件系统、进程列表和资源限制，但和已存在的容器共享IP地址和端口等网络资源，亮这个直接通过lo环回接口通信
- --net=none :让Docker将所有新容器放到隔离的网络栈中，但是不进行网络配置，由用户自己配置。